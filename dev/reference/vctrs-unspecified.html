<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>A 1d vector of unspecified type — vctrs-unspecified • vctrs</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="A 1d vector of unspecified type — vctrs-unspecified"><meta name="description" content="This is the underlying type used to represent logical vectors that only
contain NA. These require special handling because we want to allow logical
NA to specify missingness that can be cast to any other type.
vec_ptype() and vec_ptype2() convert a logical vector of NA into an
empty &amp;lt;unspecified&amp;gt; type. This type can combine with any other type.
vec_ptype_common() uses both vec_ptype() and vec_ptype2() to compute
the common type, but then returns a finalised type using
vec_ptype_finalise(). The purpose of vec_ptype_finalise() is to turn any
remaining &amp;lt;unspecified&amp;gt; types back into &amp;lt;logical&amp;gt;, which is the more
useful type for callers of vec_ptype_common().
vec_ptype_finalise() is an S3 generic, but it is extremely rare to need to
write an S3 method for this. Data frames (and data frame subclasses) are
already recursively finalised by the default method. The only time you may
need to write an S3 method for vec_ptype_finalise() is if your class
wraps an arbitrary vector that has the potential to be a logical vector
containing only NAs. See ivs::iv() for an example of this, which wraps
arbitrary start and end vectors of the same type into a single interval
vector class."><meta property="og:description" content="This is the underlying type used to represent logical vectors that only
contain NA. These require special handling because we want to allow logical
NA to specify missingness that can be cast to any other type.
vec_ptype() and vec_ptype2() convert a logical vector of NA into an
empty &amp;lt;unspecified&amp;gt; type. This type can combine with any other type.
vec_ptype_common() uses both vec_ptype() and vec_ptype2() to compute
the common type, but then returns a finalised type using
vec_ptype_finalise(). The purpose of vec_ptype_finalise() is to turn any
remaining &amp;lt;unspecified&amp;gt; types back into &amp;lt;logical&amp;gt;, which is the more
useful type for callers of vec_ptype_common().
vec_ptype_finalise() is an S3 generic, but it is extremely rare to need to
write an S3 method for this. Data frames (and data frame subclasses) are
already recursively finalised by the default method. The only time you may
need to write an S3 method for vec_ptype_finalise() is if your class
wraps an arbitrary vector that has the potential to be a logical vector
containing only NAs. See ivs::iv() for an example of this, which wraps
arbitrary start and end vectors of the same type into a single interval
vector class."><meta property="og:image" content="https://vctrs.r-lib.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="vctrs.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vctrs</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.6.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/pillar.html">Printing vectors nicely in tibbles</a></li>
    <li><a class="dropdown-item" href="../articles/s3-vector.html">S3 vectors</a></li>
    <li><a class="dropdown-item" href="../articles/stability.html">Type and size stability</a></li>
    <li><a class="dropdown-item" href="../articles/type-size.html">Prototypes and sizes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/vctrs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>A 1d vector of unspecified type</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/vctrs/blob/main/R/type-unspecified.R" class="external-link"><code>R/type-unspecified.R</code></a></small>
      <div class="d-none name"><code>vctrs-unspecified.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This is the underlying type used to represent logical vectors that only
contain <code>NA</code>. These require special handling because we want to allow logical
<code>NA</code> to specify missingness that can be cast to any other type.</p>
<p><code><a href="vec_ptype.html">vec_ptype()</a></code> and <code><a href="vec_ptype2.html">vec_ptype2()</a></code> convert a logical vector of <code>NA</code> into an
empty <code>&lt;unspecified&gt;</code> type. This type can combine with any other type.</p>
<p><code><a href="vec_ptype.html">vec_ptype_common()</a></code> uses both <code><a href="vec_ptype.html">vec_ptype()</a></code> and <code><a href="vec_ptype2.html">vec_ptype2()</a></code> to compute
the common type, but then returns a <em>finalised</em> type using
<code>vec_ptype_finalise()</code>. The purpose of <code>vec_ptype_finalise()</code> is to turn any
remaining <code>&lt;unspecified&gt;</code> types back into <code>&lt;logical&gt;</code>, which is the more
useful type for callers of <code><a href="vec_ptype.html">vec_ptype_common()</a></code>.</p>
<p><code>vec_ptype_finalise()</code> is an S3 generic, but it is extremely rare to need to
write an S3 method for this. Data frames (and data frame subclasses) are
already recursively finalised by the default method. The only time you may
need to write an S3 method for <code>vec_ptype_finalise()</code> is if your class
<em>wraps</em> an arbitrary vector that has the potential to be a logical vector
containing only <code>NA</code>s. See <code>ivs::iv()</code> for an example of this, which wraps
arbitrary <code>start</code> and <code>end</code> vectors of the same type into a single interval
vector class.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">unspecified</span><span class="op">(</span>n <span class="op">=</span> <span class="fl">0</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vec_ptype_finalise</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-n">n<a class="anchor" aria-label="anchor" href="#arg-n"></a></dt>
<dd><p>Length of vector</p></dd>


<dt id="arg-x">x<a class="anchor" aria-label="anchor" href="#arg-x"></a></dt>
<dd><p>A <code>ptype</code> to finalize, typically a result of <code><a href="vec_ptype.html">vec_ptype()</a></code> or
<code><a href="vec_ptype2.html">vec_ptype2()</a></code>.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>

</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Returns `unspecified()`</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;unspecified&gt; [0]</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;unspecified&gt; [0]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># We've chosen to make this return `logical()`, but this is admittedly</span></span></span>
<span class="r-in"><span><span class="co"># ambiguous, as it could be seen as "an empty vector of `NA`s" that could</span></span></span>
<span class="r-in"><span><span class="co"># also be treated as unspecified.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/logical.html" class="external-link">logical</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> logical(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># These return `unspecified()`</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype2.html">vec_ptype2</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;unspecified&gt; [0]</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype2.html">vec_ptype2</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;unspecified&gt; [0]</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype2.html">vec_ptype2</a></span><span class="op">(</span><span class="cn">NULL</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;unspecified&gt; [0]</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># An unspecified vector can combine with any other type</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype2.html">vec_ptype2</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype2.html">vec_ptype2</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same as using `unspecified()` directly</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype2.html">vec_ptype2</a></span><span class="op">(</span><span class="fu">unspecified</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span>, <span class="st">"x"</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype2.html">vec_ptype2</a></span><span class="op">(</span><span class="st">"x"</span>, <span class="fu">unspecified</span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Finalising a ptype turns unspecified back to logical</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;unspecified&gt; [0]</span>
<span class="r-in"><span><span class="fu">vec_ptype_finalise</span><span class="op">(</span><span class="fu"><a href="vec_ptype.html">vec_ptype</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> logical(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># This works recursively over data frames</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_frame.html">data_frame</a></span><span class="op">(</span>x <span class="op">=</span> <span class="cn">NA</span>, y <span class="op">=</span> <span class="fu"><a href="data_frame.html">data_frame</a></span><span class="op">(</span>z <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype_show</a></span><span class="op">(</span><span class="fu"><a href="vec_ptype.html">vec_ptype</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prototype: data.frame&lt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x: vctrs_unspecified</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   y: data.frame&lt;z:vctrs_unspecified&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt;</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype_show</a></span><span class="op">(</span><span class="fu">vec_ptype_finalise</span><span class="op">(</span><span class="fu"><a href="vec_ptype.html">vec_ptype</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prototype: data.frame&lt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x: logical</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   y: data.frame&lt;z:logical&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt;</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `vec_ptype_common()` finalises automatically rather than returning an</span></span></span>
<span class="r-in"><span><span class="co"># unspecified type</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype_common</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> logical(0)</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype_common</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> logical(0)</span>
<span class="r-in"><span><span class="fu"><a href="vec_ptype.html">vec_ptype_show</a></span><span class="op">(</span><span class="fu"><a href="vec_ptype.html">vec_ptype_common</a></span><span class="op">(</span><span class="va">df</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Prototype: data.frame&lt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x: logical</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   y: data.frame&lt;z:logical&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &gt;</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

