<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Parallel any() and all() — parallel-operators • vctrs</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Parallel any() and all() — parallel-operators"><meta name="description" content="These functions are variants of any() and all() that work in parallel on
multiple inputs at once. They work similarly to how pmin() and pmax() are
parallel variants of min() and max()."><meta property="og:description" content="These functions are variants of any() and all() that work in parallel on
multiple inputs at once. They work similarly to how pmin() and pmax() are
parallel variants of min() and max()."><meta property="og:image" content="https://vctrs.r-lib.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="vctrs.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vctrs</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.7.1.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/pillar.html">Printing vectors nicely in tibbles</a></li>
    <li><a class="dropdown-item" href="../articles/s3-vector.html">S3 vectors</a></li>
    <li><a class="dropdown-item" href="../articles/stability.html">Type and size stability</a></li>
    <li><a class="dropdown-item" href="../articles/type-size.html">Prototypes and sizes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/vctrs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Parallel <code>any()</code> and <code>all()</code></h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/vctrs/blob/main/R/parallel.R" class="external-link"><code>R/parallel.R</code></a></small>
      <div class="d-none name"><code>parallel-operators.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>These functions are variants of <code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code> and <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> that work in parallel on
multiple inputs at once. They work similarly to how <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax()</a></code> are
parallel variants of <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min()</a></code> and <code><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vec_pany</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  .missing <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  .size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .arg <span class="op">=</span> <span class="st">""</span>,</span>
<span>  .error_call <span class="op">=</span> <span class="fu">current_env</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">vec_pall</span><span class="op">(</span></span>
<span>  <span class="va">...</span>,</span>
<span>  .missing <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  .size <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  .arg <span class="op">=</span> <span class="st">""</span>,</span>
<span>  .error_call <span class="op">=</span> <span class="fu">current_env</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Logical vectors of equal size.</p></dd>


<dt id="arg--missing">.missing<a class="anchor" aria-label="anchor" href="#arg--missing"></a></dt>
<dd><p>Value to use when a missing value is encountered. One of:</p><ul><li><p><code>NA</code> to propagate missing values. With this, missings are treated the
same way as <code>|</code> or <code>&amp;</code>.</p></li>
<li><p><code>FALSE</code> to treat missing values as <code>FALSE</code>.</p></li>
<li><p><code>TRUE</code> to treat missing values as <code>TRUE</code>.</p></li>
</ul></dd>


<dt id="arg--size">.size<a class="anchor" aria-label="anchor" href="#arg--size"></a></dt>
<dd><p>An optional output size. Only useful to specify if it is possible
for no inputs to be provided.</p></dd>


<dt id="arg--arg">.arg<a class="anchor" aria-label="anchor" href="#arg--arg"></a></dt>
<dd><p>Argument name used in error messages.</p></dd>


<dt id="arg--error-call">.error_call<a class="anchor" aria-label="anchor" href="#arg--error-call"></a></dt>
<dd><p>The execution environment of a currently
running function, e.g. <code>caller_env()</code>. The function will be
mentioned in error messages as the source of the error. See the
<code>call</code> argument of <code><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">abort()</a></code> for more information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A logical vector the same size as the vectors in <code>...</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p><code>vec_pany()</code> and <code>vec_pall()</code> are consistent with <code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code> and <code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> when
there are no inputs to process in parallel:</p><ul><li><p><code><a href="https://rdrr.io/r/base/any.html" class="external-link">any()</a></code> returns <code>FALSE</code> with no inputs. Similarly, <code>vec_pany(.size = 1)</code>
returns <code>FALSE</code>.</p></li>
<li><p><code><a href="https://rdrr.io/r/base/all.html" class="external-link">all()</a></code> returns <code>TRUE</code> with no inputs. Similarly, <code>vec_pall(.size = 1)</code>
returns <code>TRUE</code>.</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">a</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>, <span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">b</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Default behavior treats missings like `|` does</span></span></span>
<span class="r-in"><span><span class="fu">vec_pany</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE  TRUE  TRUE  TRUE FALSE    NA  TRUE    NA    NA</span>
<span class="r-in"><span><span class="va">a</span> <span class="op">|</span> <span class="va">b</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE  TRUE  TRUE  TRUE FALSE    NA  TRUE    NA    NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Default behavior treats missings like `&amp;` does</span></span></span>
<span class="r-in"><span><span class="fu">vec_pall</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE FALSE    NA FALSE FALSE FALSE    NA FALSE    NA</span>
<span class="r-in"><span><span class="va">a</span> <span class="op">&amp;</span> <span class="va">b</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE FALSE    NA FALSE FALSE FALSE    NA FALSE    NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Remove missings from the computation, like `na_rm = TRUE`</span></span></span>
<span class="r-in"><span><span class="fu">vec_pany</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, .missing <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE</span>
<span class="r-in"><span><span class="op">(</span><span class="va">a</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">)</span> <span class="op">|</span> <span class="op">(</span><span class="va">b</span> <span class="op">&amp;</span> <span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE  TRUE  TRUE  TRUE FALSE FALSE  TRUE FALSE FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">vec_pall</span><span class="op">(</span><span class="va">a</span>, <span class="va">b</span>, .missing <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE</span>
<span class="r-in"><span><span class="op">(</span><span class="va">a</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">(</span><span class="va">b</span> <span class="op">|</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">b</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1]  TRUE FALSE  TRUE FALSE FALSE FALSE  TRUE FALSE  TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># `vec_pall()` can be used to implement a `dplyr::filter()` style API</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu"><a href="data_frame.html">data_frame</a></span><span class="op">(</span>id <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">a</span><span class="op">)</span>, a <span class="op">=</span> <span class="va">a</span>, b <span class="op">=</span> <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">keep_rows</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="vec_slice.html">vec_slice</a></span><span class="op">(</span><span class="va">x</span>, <span class="fu">vec_pall</span><span class="op">(</span><span class="va">...</span>, .missing <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="va">drop_rows</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">...</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="vec_slice.html">vec_slice</a></span><span class="op">(</span><span class="va">x</span>, <span class="op">!</span><span class="fu">vec_pall</span><span class="op">(</span><span class="va">...</span>, .missing <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># "Keep / Drop the rows when both a and b are TRUE"</span></span></span>
<span class="r-in"><span><span class="co"># These form complements of one another, even with `NA`s.</span></span></span>
<span class="r-in"><span><span class="fu">keep_rows</span><span class="op">(</span><span class="va">df</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id    a    b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  1 TRUE TRUE</span>
<span class="r-in"><span><span class="fu">drop_rows</span><span class="op">(</span><span class="va">df</span>, <span class="va">a</span>, <span class="va">b</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   id     a     b</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  2  TRUE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  3  TRUE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  4 FALSE  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  5 FALSE FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  6 FALSE    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  7    NA  TRUE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  8    NA FALSE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  9    NA    NA</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Same empty behavior as `any()` and `all()`</span></span></span>
<span class="r-in"><span><span class="fu">vec_pany</span><span class="op">(</span>.size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/any.html" class="external-link">any</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] FALSE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">vec_pall</span><span class="op">(</span>.size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/all.html" class="external-link">all</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

