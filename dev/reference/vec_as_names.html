<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Retrieve and repair names — vec_as_names • vctrs</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Source_Sans_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/Source_Code_Pro-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Retrieve and repair names — vec_as_names"><meta name="description" content='vec_as_names() takes a character vector of names and repairs it
according to the repair argument. It is the r-lib and tidyverse
equivalent of base::make.names().
vctrs deals with a few levels of name repair:
minimal names exist. The names attribute is not NULL. The
name of an unnamed element is "" and never NA. For instance,
vec_as_names() always returns minimal names and data frames
created by the tibble package have names that are, at least,
minimal.
unique names are minimal, have no duplicates, and can be used
where a variable name is expected. Empty names, ..., and
.. followed by a sequence of digits are banned.
All columns can be accessed by name via df[["name"]] and
df$`name`  and with(df, `name`).

universal names are unique and syntactic (see Details for
more).
Names work everywhere, without quoting: df$name and with(df, name) and lm(name1 ~ name2, data = df) and
dplyr::select(df, name) all work.



universal implies unique, unique implies minimal. These
levels are nested.'><meta property="og:description" content='vec_as_names() takes a character vector of names and repairs it
according to the repair argument. It is the r-lib and tidyverse
equivalent of base::make.names().
vctrs deals with a few levels of name repair:
minimal names exist. The names attribute is not NULL. The
name of an unnamed element is "" and never NA. For instance,
vec_as_names() always returns minimal names and data frames
created by the tibble package have names that are, at least,
minimal.
unique names are minimal, have no duplicates, and can be used
where a variable name is expected. Empty names, ..., and
.. followed by a sequence of digits are banned.
All columns can be accessed by name via df[["name"]] and
df$`name`  and with(df, `name`).

universal names are unique and syntactic (see Details for
more).
Names work everywhere, without quoting: df$name and with(df, name) and lm(name1 ~ name2, data = df) and
dplyr::select(df, name) all work.



universal implies unique, unique implies minimal. These
levels are nested.'><meta property="og:image" content="https://vctrs.r-lib.org/logo.png"><meta name="robots" content="noindex"><script src="https://cdn.jsdelivr.net/gh/posit-dev/supported-by-posit/js/badge.min.js" data-max-height="43" data-light-bg="#666f76" data-light-fg="#f9f9f9"></script><script defer data-domain="vctrs.r-lib.org,all.tidyverse.org" src="https://plausible.io/js/plausible.js"></script></head><body>
    <a href="#container" class="visually-hidden-focusable">Skip to content</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-none" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">vctrs</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="In-development version">0.6.5.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/pillar.html">Printing vectors nicely in tibbles</a></li>
    <li><a class="dropdown-item" href="../articles/s3-vector.html">S3 vectors</a></li>
    <li><a class="dropdown-item" href="../articles/stability.html">Type and size stability</a></li>
    <li><a class="dropdown-item" href="../articles/type-size.html">Prototypes and sizes</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/r-lib/vctrs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic" id="container">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Retrieve and repair names</h1>
      <small class="dont-index">Source: <a href="https://github.com/r-lib/vctrs/blob/main/R/names.R" class="external-link"><code>R/names.R</code></a></small>
      <div class="d-none name"><code>vec_as_names.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><code>vec_as_names()</code> takes a character vector of names and repairs it
according to the <code>repair</code> argument. It is the r-lib and tidyverse
equivalent of <code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">base::make.names()</a></code>.</p>
<p>vctrs deals with a few levels of name repair:</p><ul><li><p><code>minimal</code> names exist. The <code>names</code> attribute is not <code>NULL</code>. The
name of an unnamed element is <code>""</code> and never <code>NA</code>. For instance,
<code>vec_as_names()</code> always returns minimal names and data frames
created by the tibble package have names that are, at least,
<code>minimal</code>.</p></li>
<li><p><code>unique</code> names are <code>minimal</code>, have no duplicates, and can be used
where a variable name is expected. Empty names, <code>...</code>, and
<code>..</code> followed by a sequence of digits are banned.</p><ul><li><p>All columns can be accessed by name via <code>df[["name"]]</code> and
<code>df$`name` </code> and <code>with(df, `name`)</code>.</p></li>
</ul></li>
<li><p><code>universal</code> names are <code>unique</code> and syntactic (see Details for
more).</p><ul><li><p>Names work everywhere, without quoting: <code>df$name</code> and <code>with(df, name)</code> and <code>lm(name1 ~ name2, data = df)</code> and
<code>dplyr::select(df, name)</code> all work.</p></li>
</ul></li>
</ul><p><code>universal</code> implies <code>unique</code>, <code>unique</code> implies <code>minimal</code>. These
levels are nested.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vec_as_names</span><span class="op">(</span></span>
<span>  <span class="va">names</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  repair <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"minimal"</span>, <span class="st">"unique"</span>, <span class="st">"universal"</span>, <span class="st">"check_unique"</span>, <span class="st">"unique_quiet"</span>,</span>
<span>    <span class="st">"universal_quiet"</span><span class="op">)</span>,</span>
<span>  repair_arg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  call <span class="op">=</span> <span class="fu">caller_env</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-names">names<a class="anchor" aria-label="anchor" href="#arg-names"></a></dt>
<dd><p>A character vector.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>These dots are for future extensions and must be empty.</p></dd>


<dt id="arg-repair">repair<a class="anchor" aria-label="anchor" href="#arg-repair"></a></dt>
<dd><p>Either a string or a function. If a string, it must be one of
<code>"check_unique"</code>, <code>"minimal"</code>, <code>"unique"</code>, <code>"universal"</code>, <code>"unique_quiet"</code>,
or <code>"universal_quiet"</code>. If a function, it is invoked with a vector of
minimal names and must return minimal names, otherwise an error is thrown.</p><ul><li><p>Minimal names are never <code>NULL</code> or <code>NA</code>. When an element doesn't
have a name, its minimal name is an empty string.</p></li>
<li><p>Unique names are unique. A suffix is appended to duplicate
names to make them unique.</p></li>
<li><p>Universal names are unique and syntactic, meaning that you can
safely use the names as variables without causing a syntax
error.</p></li>
</ul><p>The <code>"check_unique"</code> option doesn't perform any name repair.
Instead, an error is raised if the names don't suit the
<code>"unique"</code> criteria.</p>
<p>The options <code>"unique_quiet"</code> and <code>"universal_quiet"</code> are here to help the
user who calls this function indirectly, via another function which exposes
<code>repair</code> but not <code>quiet</code>. Specifying <code>repair = "unique_quiet"</code> is like
specifying <code>repair = "unique", quiet = TRUE</code>. When the <code>"*_quiet"</code> options
are used, any setting of <code>quiet</code> is silently overridden.</p></dd>


<dt id="arg-repair-arg">repair_arg<a class="anchor" aria-label="anchor" href="#arg-repair-arg"></a></dt>
<dd><p>If specified and <code>repair = "check_unique"</code>, any errors
will include a hint to set the <code>repair_arg</code>.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>By default, the user is informed of any renaming
caused by repairing the names. This only concerns unique and
universal repairing. Set <code>quiet</code> to <code>TRUE</code> to silence the
messages.</p>
<p>Users can silence the name repair messages by setting the
<code>"rlib_name_repair_verbosity"</code> global option to <code>"quiet"</code>.</p></dd>


<dt id="arg-call">call<a class="anchor" aria-label="anchor" href="#arg-call"></a></dt>
<dd><p>The execution environment of a currently
running function, e.g. <code>caller_env()</code>. The function will be
mentioned in error messages as the source of the error. See the
<code>call</code> argument of <code><a href="https://rlang.r-lib.org/reference/abort.html" class="external-link">abort()</a></code> for more information.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="minimal-names"><code>minimal</code> names<a class="anchor" aria-label="anchor" href="#minimal-names"></a></h2>



<p><code>minimal</code> names exist. The <code>names</code> attribute is not <code>NULL</code>. The
name of an unnamed element is <code>""</code> and never <code>NA</code>.</p>
<p>Examples:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>Original names of a vector with length <span class="dv">3</span><span class="sc">:</span> <span class="cn">NULL</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>                           minimal names<span class="sc">:</span> <span class="st">""</span> <span class="st">""</span> <span class="st">""</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>                          Original names<span class="sc">:</span> <span class="st">"x"</span> <span class="cn">NA</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a>                           minimal names<span class="sc">:</span> <span class="st">"x"</span> <span class="st">""</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="unique-names"><code>unique</code> names<a class="anchor" aria-label="anchor" href="#unique-names"></a></h2>



<p><code>unique</code> names are <code>minimal</code>, have no duplicates, and can be used
(possibly with backticks) in contexts where a variable is
expected. Empty names, <code>...</code>, and <code>..</code> followed by a sequence of
digits are banned. If a data frame has <code>unique</code> names, you can
index it by name, and also access the columns by name. In
particular, <code>df[["name"]]</code> and <code>df$`name`</code> and also <code>with(df, `name`)</code> always work.</p>
<p>There are many ways to make names <code>unique</code>. We append a suffix of the form
<code>...j</code> to any name that is <code>""</code> or a duplicate, where <code>j</code> is the position.
We also change <code>..#</code> and <code>...</code> to <code>...#</code>.</p>
<p>Example:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>Original names<span class="sc">:</span>     <span class="st">""</span>     <span class="st">"x"</span>     <span class="st">""</span> <span class="st">"y"</span>     <span class="st">"x"</span>  <span class="st">"..2"</span>  <span class="st">"..."</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>  unique names<span class="sc">:</span> <span class="st">"...1"</span> <span class="st">"x...2"</span> <span class="st">"...3"</span> <span class="st">"y"</span> <span class="st">"x...5"</span> <span class="st">"...6"</span> <span class="st">"...7"</span></span></code></pre><p></p></div>
<p>Pre-existing suffixes of the form <code>...j</code> are always stripped, prior
to making names <code>unique</code>, i.e. reconstructing the suffixes. If this
interacts poorly with your names, you should take control of name
repair.</p>
    </div>
    <div class="section level2">
    <h2 id="universal-names"><code>universal</code> names<a class="anchor" aria-label="anchor" href="#universal-names"></a></h2>



<p><code>universal</code> names are <code>unique</code> and syntactic, meaning they:</p><ul><li><p>Are never empty (inherited from <code>unique</code>).</p></li>
<li><p>Have no duplicates (inherited from <code>unique</code>).</p></li>
<li><p>Are not <code>...</code>. Do not have the form <code>..i</code>, where <code>i</code> is a
number (inherited from <code>unique</code>).</p></li>
<li><p>Consist of letters, numbers, and the dot <code>.</code> or underscore <code>_</code>
characters.</p></li>
<li><p>Start with a letter or start with the dot <code>.</code> not followed by a
number.</p></li>
<li><p>Are not a <a href="https://rdrr.io/r/base/Reserved.html" class="external-link">reserved</a> word, e.g., <code>if</code> or <code>function</code> or <code>TRUE</code>.</p></li>
</ul><p>If a vector has <code>universal</code> names, variable names can be used
"as is" in code. They work well with nonstandard evaluation, e.g.,
<code>df$name</code> works.</p>
<p>vctrs has a different method of making names syntactic than
<code><a href="https://rdrr.io/r/base/make.names.html" class="external-link">base::make.names()</a></code>. In general, vctrs prepends one or more dots
<code>.</code> until the name is syntactic.</p>
<p>Examples:</p>
<p></p><div class="sourceCode"><pre><code><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a> Original names<span class="sc">:</span>     <span class="st">""</span>     <span class="st">"x"</span>    <span class="cn">NA</span>      <span class="st">"x"</span></span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>universal names<span class="sc">:</span> <span class="st">"...1"</span> <span class="st">"x...2"</span> <span class="st">"...3"</span> <span class="st">"x...4"</span></span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" tabindex="-1"></a>  Original names<span class="sc">:</span> <span class="st">"(y)"</span>  <span class="st">"_z"</span>  <span class="st">".2fa"</span>  <span class="st">"FALSE"</span></span>
<span id="cb1-5"><a href="#cb1-5" tabindex="-1"></a> universal names<span class="sc">:</span> <span class="st">".y."</span> <span class="st">"._z"</span> <span class="st">"..2fa"</span> <span class="st">".FALSE"</span></span></code></pre><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rlang.r-lib.org/reference/names2.html" class="external-link">rlang::names2()</a></code> returns the names of an object, after
making them <code>minimal</code>.</p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># By default, `vec_as_names()` returns minimal names:</span></span></span>
<span class="r-in"><span><span class="fu">vec_as_names</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"foo"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] ""    ""    "foo"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># You can make them unique:</span></span></span>
<span class="r-in"><span><span class="fu">vec_as_names</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span>, <span class="st">"foo"</span><span class="op">)</span>, repair <span class="op">=</span> <span class="st">"unique"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...1`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `` -&gt; `...2`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "...1" "...2" "foo" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Universal repairing fixes any non-syntactic name:</span></span></span>
<span class="r-in"><span><span class="fu">vec_as_names</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"_foo"</span>, <span class="st">"+"</span><span class="op">)</span>, repair <span class="op">=</span> <span class="st">"universal"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> New names:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `_foo` -&gt; `._foo`</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">•</span> `+` -&gt; `.`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "._foo" "."    </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>
  <footer><div class="container">
  <div class="pkgdown-footer-left">
  <p>Developed by <a href="https://hadley.nz" class="external-link">Hadley Wickham</a>, <a href="https://github.com/lionel-" class="external-link">Lionel Henry</a>, <a href="https://github.com/DavisVaughan" class="external-link">Davis Vaughan</a>, <a href="https://www.posit.co" class="external-link"><img src="https://www.tidyverse.org/posit-logo.svg" alt="Posit" height="16" width="62" style="margin-bottom: 3px;"></a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

  </div></footer></body></html>

